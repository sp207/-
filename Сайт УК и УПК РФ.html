<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Учебный сайт УК/УПК РФ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; background:#1a1a1a; margin:0; padding:0; color:#fff; }
.container { max-width:950px; margin:auto; padding:20px; }
h1,h2,h3 { color:#ffd700; }
button { margin:5px; padding:12px 20px; font-size:15px; border:none; border-radius:8px; cursor:pointer; transition:0.2s; }
button:hover { opacity:0.85; }
.hidden { display:none; }
.card { background:#ffd700; color:#000; padding:20px; margin:15px 0; border-radius:12px; box-shadow:0 6px 15px rgba(0,0,0,0.3); }
.card p { margin:8px 0; }
.case-options button { display:block; width:100%; margin:5px 0; background:#000; color:#ffd700; }
.case-options button:hover { background:#222; color:#ffd700; }
.breakdown { background:#333; color:#ffd700; padding:10px; border-radius:8px; margin-top:10px; display:none; }
.toggle-btn { background:#000; color:#ffd700; margin-top:10px; }
.tabs { margin-top:20px; }
.tab-btn { background:#222; color:#ffd700; margin-right:5px; }
.tab-btn.active { background:#ffd700; color:#000; }
@media(max-width:600px){
  button { width:100%; font-size:16px; }
  .card { padding:15px; }
}
</style>
</head>
<body>
<div class="container">
<h1>Учебный сайт УК/УПК РФ</h1>

<div id="main-screen">
  <button onclick="selectCode('uk')">УК РФ</button>
  <button onclick="selectCode('upk')">УПК РФ</button>
</div>

<div id="tabs" class="tabs hidden">
  <button class="tab-btn active" onclick="showTab('theory')">Теория</button>
  <button class="tab-btn" onclick="showTab('quiz')">Тест</button>
</div>

<div id="theory-screen" class="hidden"></div>
<div id="quiz-screen" class="hidden"></div>
<div id="back-button-container" class="hidden">
  <button onclick="goMain()">На главный экран</button>
</div>

<script>
// -------------------- БАЗА ДАННЫХ --------------------
let db={uk:{articles:[]},upk:{articles:[]}};

// Примерные статьи УК
// -------------------- УК РФ (расширенная база) --------------------
db.uk.articles=[
{
n:"105", t:"Убийство", d:"Умышленное причинение смерти.", example:"Нанёс смертельный удар.", hint:"Прямой умысел.",
cases:[
{q:"Во время драки человек получил смертельное ножевое ранение.", a:"105", o:["105","109","111","158","162"], breakdown:"Смерть потерпевшего; Умысел доказан; Статья 105 УК РФ.", trap:"Не спутать с причинением смерти по неосторожности."},
{q:"Задушил потерпевшего в ходе конфликта.", a:"105", o:["105","112","115","158","162"], breakdown:"Метод убийства; Умышленное лишение жизни; Статья 105 УК РФ.", trap:"Не квалифицировать как лёгкий или средний вред."}
]
},
{
n:"109", t:"Причинение смерти по неосторожности", d:"Причинение смерти без умысла.", example:"ДТП с летальным исходом.", hint:"Отсутствие умысла.",
cases:[
{q:"Водитель сбил пешехода на переходе.", a:"109", o:["105","109","111","158","162"], breakdown:"Смерть потерпевшего; Нет умысла; Статья 109 УК РФ.", trap:"Не спутать с умышленным убийством."},
{q:"Пожар в квартире из-за неосторожного обращения с огнём привёл к смерти жильца.", a:"109", o:["105","109","111","118","120"], breakdown:"Смерть по неосторожности; Статья 109 УК РФ.", trap:"Не спутать с умышленным убийством."}
]
},
{
n:"111", t:"Причинение тяжкого вреда здоровью", d:"Причинение тяжкого вреда здоровью потерпевшего.", example:"Удар ножом, повлёкший опасность для жизни.", hint:"Состав тяжкого вреда.",
cases:[
{q:"Удар ножом в живот, потерпевший в реанимации.", a:"111", o:["111","112","115","105","109"], breakdown:"Тяжкий вред; угроза жизни; Статья 111 УК РФ.", trap:"Не спутать с легким или средним вредом."}
]
},
{
n:"112", t:"Причинение средней тяжести вреда здоровью", d:"Средний вред здоровью, опасный для жизни или здоровья.", example:"Избил человека, сломал нос и челюсть.", hint:"Не опасно для жизни, но средний ущерб.",
cases:[
{q:"В драке сломал челюсть и нос потерпевшему.", a:"112", o:["111","112","115","105","109"], breakdown:"Средний вред; Статья 112 УК РФ.", trap:"Не спутать с тяжким вредом."}
]
},
{
n:"115", t:"Умышленное причинение легкого вреда здоровью", d:"Лёгкий вред здоровью потерпевшего.", example:"Лёгкий удар в драке.", hint:"Наносит телесные повреждения, но не опасно для жизни.",
cases:[
{q:"Легкий удар рукой по лицу потерпевшего.", a:"115", o:["111","112","115","105","109"], breakdown:"Легкий вред; Статья 115 УК РФ.", trap:"Не спутать с средним или тяжким вредом."}
]
},
{
n:"158", t:"Кража", d:"Хищение чужого имущества.", example:"Украл телефон.", hint:"Хищение чужого имущества.",
cases:[
{q:"Взял чужой кошелёк из сумки.", a:"158", o:["158","159","160","161","162"], breakdown:"Факт хищения; Статья 158 УК РФ.", trap:"Не спутать с грабежом или разбой."}
]
},
{
n:"159", t:"Мошенничество", d:"Хищение чужого имущества обманом или злоупотреблением доверием.", example:"Обманул покупателя и присвоил деньги.", hint:"Обман или злоупотребление доверием.",
cases:[
{q:"Продал несуществующий товар и присвоил деньги.", a:"159", o:["158","159","160","161","162"], breakdown:"Мошенничество; Статья 159 УК РФ.", trap:"Не спутать с простой кражей."}
]
},
{
n:"162", t:"Разбой", d:"Хищение чужого имущества с применением насилия.", example:"Похитил сумку с угрозой ножом.", hint:"Насилие + хищение.",
cases:[
{q:"Отобрал сумку с применением угрозы ножа.", a:"162", o:["162","158","159","160","161"], breakdown:"Насилие; хищение; Статья 162 УК РФ.", trap:"Не спутать с кражей без насилия."}
]
},
{
n:"163", t:"Вымогательство", d:"Требование имущества с угрозой.", example:"Потребовал деньги под угрозой разглашения компромата.", hint:"Угроза + требование имущества.",
cases:[
{q:"Потребовал деньги под угрозой ущерба репутации.", a:"163", o:["163","159","158","162","160"], breakdown:"Угроза и требование имущества; Статья 163 УК РФ.", trap:"Не спутать с простым мошенничеством."}
]
},
{
n:"164", t:"Разглашение тайны", d:"Незаконное раскрытие информации, охраняемой законом.", example:"Раскрытие служебной тайны.", hint:"Конфиденциальная информация.",
cases:[
{q:"Сотрудник раскрыл служебную тайну третьим лицам.", a:"164", o:["164","159","163","158","162"], breakdown:"Нарушение тайны; Статья 164 УК РФ.", trap:"Не спутать с кражей или мошенничеством."}
]}
];
db.uk.articles = db.uk.articles.concat([
{
n:"165", t:"Умышленные повреждения чужого имущества", d:"Умышленные действия, причинившие ущерб чужому имуществу.", example:"Разбил окно в чужой квартире.", hint:"Умышленный ущерб имуществу.",
cases:[
{q:"Разбил окно в чужой квартире из-за конфликта.", a:"165", o:["165","158","159","162","163"], breakdown:"Умышленный ущерб; Статья 165 УК РФ.", trap:"Не спутать с кражей или грабежом."}
]
},
{
n:"167", t:"Умышленные уничтожение или повреждение имущества", d:"Уничтожение или повреждение чужого имущества без цели хищения.", example:"Сжёг чужой сарай.", hint:"Умышленное уничтожение имущества.",
cases:[
{q:"Сжег сарай соседа после ссоры.", a:"167", o:["167","165","158","159","162"], breakdown:"Умышленное уничтожение имущества; Статья 167 УК РФ.", trap:"Не спутать с кражей или мошенничеством."}
]
},
{
n:"171", t:"Незаконное предпринимательство", d:"Деятельность без регистрации или с нарушением закона.", example:"Вёл бизнес без лицензии.", hint:"Нарушение закона в предпринимательстве.",
cases:[
{q:"Организовал торговлю алкоголем без лицензии.", a:"171", o:["171","159","158","162","163"], breakdown:"Незаконное предпринимательство; Статья 171 УК РФ.", trap:"Не спутать с мошенничеством."}
]
},
{
n:"173", t:"Вовлечение несовершеннолетнего в преступление", d:"Привлечение несовершеннолетнего к совершению преступления.", example:"Привлек ребёнка к краже.", hint:"Несовершеннолетний участник преступления.",
cases:[
{q:"Привлек несовершеннолетнего к кражам.", a:"173", o:["173","158","162","159","163"], breakdown:"Привлечение ребёнка; Статья 173 УК РФ.", trap:"Не спутать с обычной кражей."}
]
},
{
n:"174", t:"Нарушение авторских прав", d:"Незаконное использование объектов авторского права.", example:"Скопировал книгу без разрешения.", hint:"Авторское право нарушено.",
cases:[
{q:"Скопировал книгу и распространял её без разрешения автора.", a:"174", o:["174","159","158","171","163"], breakdown:"Нарушение авторских прав; Статья 174 УК РФ.", trap:"Не спутать с кражей."}
]
},
{
n:"178", t:"Подделка документов", d:"Создание или использование поддельных документов.", example:"Подделал справку о доходах.", hint:"Документ не подлинный.",
cases:[
{q:"Подделал справку о доходах для кредита.", a:"178", o:["178","159","158","162","163"], breakdown:"Подделка документа; Статья 178 УК РФ.", trap:"Не спутать с мошенничеством."}
]
},
{
n:"186", t:"Хулиганство", d:"Нарушение общественного порядка, грубое и наглое.", example:"Вандализм на улице.", hint:"Грубое нарушение порядка.",
cases:[
{q:"Разбил витрину магазина и кричал на прохожих.", a:"186", o:["186","158","162","159","163"], breakdown:"Хулиганство; Статья 186 УК РФ.", trap:"Не спутать с кражей или грабежом."}
]
},
{
n:"213", t:"Хулиганство с применением оружия", d:"Хулиганство с угрозой или применением оружия.", example:"Угрожал ножом прохожим.", hint:"Насилие + оружие.",
cases:[
{q:"Угрожал прохожим ножом на улице.", a:"213", o:["213","186","158","162","159"], breakdown:"Хулиганство с оружием; Статья 213 УК РФ.", trap:"Не спутать с обычным хулиганством."}
]
},
{
n:"228", t:"Незаконный оборот наркотиков", d:"Производство, сбыт, перевозка наркотиков без разрешения.", example:"Сбыт запрещённых веществ.", hint:"Нарушение закона о наркотиках.",
cases:[
{q:"Продажа наркотиков на улице.", a:"228", o:["228","159","158","162","163"], breakdown:"Незаконный оборот наркотиков; Статья 228 УК РФ.", trap:"Не спутать с обычной торговлей."}
]
},
{
n:"264", t:"Нарушение правил безопасности на транспорте", d:"Создание угрозы жизни и здоровью при транспортных нарушениях.", example:"Нарушение правил на дороге с летальным исходом.", hint:"Опасность для жизни.",
cases:[
{q:"Водитель на скорости нарушил правила и сбил пешехода.", a:"264", o:["264","109","105","158","162"], breakdown:"Нарушение правил транспорта; Статья 264 УК РФ.", trap:"Не спутать с убийством умышленным."}
]
}
]);
db.uk.articles = db.uk.articles.concat([
{
n:"285", t:"Злоупотребление полномочиями", d:"Неправомерные действия должностного лица, причиняющие вред.", example:"Должностное лицо выдало незаконное разрешение.", hint:"Нарушение служебных полномочий.",
cases:[
{q:"Сотрудник выдал разрешение без законных оснований.", a:"285", o:["285","159","158","162","163"], breakdown:"Злоупотребление полномочиями; Статья 285 УК РФ.", trap:"Не спутать с мошенничеством."}
]
},
{
n:"286", t:"Превышение должностных полномочий", d:"Действия должностного лица, выходящие за пределы полномочий.", example:"Должностное лицо приняло незаконное решение.", hint:"Превышение полномочий.",
cases:[
{q:"Начальник подписал незаконное распоряжение.", a:"286", o:["286","285","159","158","162"], breakdown:"Превышение полномочий; Статья 286 УК РФ.", trap:"Не спутать с злоупотреблением."}
]
},
{
n:"293", t:"Халатность", d:"Ненадлежащее исполнение обязанностей, повлекшее тяжкие последствия.", example:"Не принял меры безопасности, произошёл пожар.", hint:"Ненадлежащее исполнение обязанностей.",
cases:[
{q:"Пожар в больнице из-за несоблюдения правил.", a:"293", o:["293","264","105","109","158"], breakdown:"Халатность; Статья 293 УК РФ.", trap:"Не спутать с умышленным причинением вреда."}
]
},
{
n:"294", t:"Воспрепятствование правосудию", d:"Действия, мешающие расследованию или судопроизводству.", example:"Скрыл доказательства.", hint:"Мешает правосудию.",
cases:[
{q:"Скрыл вещественные доказательства по делу.", a:"294", o:["294","158","162","159","285"], breakdown:"Воспрепятствование правосудию; Статья 294 УК РФ.", trap:"Не спутать с уничтожением имущества."}
]
},
{
n:"296", t:"Насилие в отношении представителя власти", d:"Применение насилия против должностного лица.", example:"Напал на полицейского.", hint:"Насилие против власти.",
cases:[
{q:"Напал на полицейского при задержании.", a:"296", o:["296","162","158","159","285"], breakdown:"Насилие против представителя власти; Статья 296 УК РФ.", trap:"Не спутать с обычным хулиганством."}
]
},
{
n:"307", t:"Препятствие законной деятельности органов безопасности", d:"Препятствие работе сотрудников безопасности.", example:"Не допустил проверку.", hint:"Препятствие работе безопасности.",
cases:[
{q:"Не позволил сотрудникам ФСБ провести проверку.", a:"307", o:["307","285","286","294","296"], breakdown:"Препятствие деятельности органов; Статья 307 УК РФ.", trap:"Не спутать с воспрепятствованием суду."}
]
},
{
n:"310", t:"Присвоение или растрата", d:"Незаконное присвоение чужого имущества.", example:"Присвоил бюджетные средства.", hint:"Присвоение чужого имущества.",
cases:[
{q:"Сотрудник присвоил бюджетные средства учреждения.", a:"310", o:["310","159","158","162","163"], breakdown:"Присвоение или растрата; Статья 310 УК РФ.", trap:"Не спутать с обычным мошенничеством."}
]
},
{
n:"317", t:"Посягательство на жизнь государственного или общественного деятеля", d:"Угроза или нападение на лиц, выполняющих государственные функции.", example:"Попытка убийства депутата.", hint:"Нападение на государственное лицо.",
cases:[
{q:"Попытка убийства депутата.", a:"317", o:["317","105","109","162","158"], breakdown:"Посягательство на жизнь должностного лица; Статья 317 УК РФ.", trap:"Не спутать с обычным убийством."}
]
},
{
n:"318", t:"Применение насилия в отношении представителя власти", d:"Применение насилия против сотрудника власти.", example:"Ударил полицейского.", hint:"Насилие + должностное лицо.",
cases:[
{q:"Ударил полицейского во время задержания.", a:"318", o:["318","296","162","158","159"], breakdown:"Насилие против представителя власти; Статья 318 УК РФ.", trap:"Не спутать с обычным хулиганством."}
]
},
{
n:"321", t:"Превышение полномочий органами полиции", d:"Незаконные действия сотрудников полиции.", example:"Применил силу без оснований.", hint:"Превышение полномочий полиции.",
cases:[
{q:"Сотрудник полиции применил силу без законных оснований.", a:"321", o:["321","286","285","294","296"], breakdown:"Превышение полномочий; Статья 321 УК РФ.", trap:"Не спутать с нападением на полицейского."}
]
}
]);

// Примерные статьи УПК
// -------------------- УПК РФ (полная база 20 статей) --------------------
db.upk.articles = [
{
n:"46", t:"Подозреваемый", d:"Лицо, задержанное по подозрению в совершении преступления.", example:"Задержан на месте преступления.", hint:"Подозреваемый ещё не обвиняемый.",
cases:[
{q:"Задержан после кражи в магазине.", a:"46", o:["46","47","49","91","56"], breakdown:"Задержание; Протокол задержания; Статья 46 УПК РФ.", trap:"Не спутать с обвиняемым."},
{q:"Подозреваемый задержан при получении похищенного имущества.", a:"46", o:["46","47","49","91","56"], breakdown:"Подозреваемый; Статья 46 УПК РФ.", trap:"Не спутать с потерпевшим."}
]
},
{
n:"47", t:"Обвиняемый", d:"Лицо, в отношении которого возбуждено уголовное дело.", example:"Обвиняется в краже.", hint:"Обвиняемый после возбуждения дела.",
cases:[
{q:"Возбуждено уголовное дело по краже.", a:"47", o:["46","47","49","91","56"], breakdown:"Лицо обвиняемо; Статья 47 УПК РФ.", trap:"Не спутать с подозреваемым."}
]
},
{
n:"49", t:"Обвинение", d:"Официальное предъявление обвинения лицу.", example:"Обвинение в совершении преступления.", hint:"Старт уголовного процесса.",
cases:[
{q:"Следователь предъявил обвинение лицу по делу о краже.", a:"49", o:["46","47","49","91","56"], breakdown:"Презентация обвинения; Статья 49 УПК РФ.", trap:"Не спутать с задержанием."}
]
},
{
n:"91", t:"Порядок дознания", d:"Правила проведения дознания по уголовным делам.", example:"Проверка фактов при расследовании.", hint:"Дознание до возбуждения дела.",
cases:[
{q:"Проверка фактов по делу о краже.", a:"91", o:["91","46","47","49","56"], breakdown:"Дознание; Статья 91 УПК РФ.", trap:"Не спутать с предварительным следствием."}
]
},
{
n:"56", t:"Предварительное следствие", d:"Расследование уголовного дела после возбуждения.", example:"Сбор доказательств, опрос свидетелей.", hint:"Следствие после возбуждения дела.",
cases:[
{q:"Собраны доказательства и опрошены свидетели по делу.", a:"56", o:["56","46","47","49","91"], breakdown:"Предварительное следствие; Статья 56 УПК РФ.", trap:"Не спутать с дознанием."}
]
},
{
n:"99", t:"Обеспечение прав участников", d:"Гарантии прав обвиняемого, подозреваемого и потерпевшего.", example:"Обвиняемый имеет право на адвоката.", hint:"Права участников процесса.",
cases:[
{q:"Обвиняемый вызвал адвоката на допрос.", a:"99", o:["99","46","47","49","91"], breakdown:"Права участников; Статья 99 УПК РФ.", trap:"Не спутать с обязанностями."}
]
},
{
n:"110", t:"Основания применения мер пресечения", d:"Условия, при которых применяются меры пресечения.", example:"Заключение под стражу подозреваемого.", hint:"Меры пресечения.",
cases:[
{q:"Подозреваемый помещён под стражу для предотвращения бегства.", a:"110", o:["110","46","47","49","91"], breakdown:"Меры пресечения; Статья 110 УПК РФ.", trap:"Не спутать с наказанием."}
]
},
{
n:"125", t:"Исключение доказательств", d:"Недопустимые доказательства не учитываются.", example:"Признание, полученное с нарушением закона.", hint:"Недопустимые доказательства.",
cases:[
{q:"Признание получено с нарушением закона.", a:"125", o:["125","56","91","46","47"], breakdown:"Исключение доказательств; Статья 125 УПК РФ.", trap:"Не спутать с законными доказательствами."}
]
},
{
n:"128", t:"Судебная экспертиза", d:"Назначение экспертизы для выяснения обстоятельств дела.", example:"Назначена экспертиза почерка.", hint:"Экспертиза для доказательств.",
cases:[
{q:"Назначена экспертиза почерка для установления автора документа.", a:"128", o:["128","125","56","91","46"], breakdown:"Судебная экспертиза; Статья 128 УПК РФ.", trap:"Не спутать с обычной экспертизой без назначения суда."}
]
},
{
n:"132", t:"Обжалование действий следствия", d:"Право на жалобу в случае нарушения прав.", example:"Жалоба на незаконный обыск.", hint:"Обжалование действий следствия.",
cases:[
{q:"Обвиняемый подал жалобу на незаконный обыск.", a:"132", o:["132","125","56","91","46"], breakdown:"Обжалование действий следствия; Статья 132 УПК РФ.", trap:"Не спутать с обычной жалобой."}
]
},
{
n:"138", t:"Применение ареста", d:"Заключение под стражу по решению суда.", example:"Суд постановил арест.", hint:"Заключение под стражу.",
cases:[
{q:"Суд постановил заключение подозреваемого под арест.", a:"138", o:["138","110","46","47","49"], breakdown:"Применение ареста; Статья 138 УПК РФ.", trap:"Не спутать с заключением после суда."}
]
},
{
n:"141", t:"Освобождение из-под стражи", d:"Условное или полное освобождение подозреваемого.", example:"Подозреваемый освобождён под залог.", hint:"Освобождение из-под стражи.",
cases:[
{q:"Подозреваемый освобождён под залог.", a:"141", o:["141","138","110","46","47"], breakdown:"Освобождение из-под стражи; Статья 141 УПК РФ.", trap:"Не спутать с завершением дела."}
]
},
{
n:"162", t:"Свидетель", d:"Лицо, дающее показания по делу.", example:"Свидетель описал события.", hint:"Дает показания.",
cases:[
{q:"Свидетель дал показания по краже.", a:"162", o:["162","56","46","47","49"], breakdown:"Свидетель; Статья 162 УПК РФ.", trap:"Не спутать с потерпевшим."}
]
},
{
n:"163", t:"Потерпевший", d:"Лицо, которому причинен ущерб преступлением.", example:"Потерпевший заявил о краже.", hint:"Потерпевший сообщает о преступлении.",
cases:[
{q:"Потерпевший заявил о краже телефона.", a:"163", o:["163","46","47","49","56"], breakdown:"Потерпевший; Статья 163 УПК РФ.", trap:"Не спутать со свидетелем."}
]
},
{
n:"165", t:"Защита обвиняемого", d:"Право на защиту адвокатом и иные гарантии.", example:"Обвиняемый воспользовался адвокатом.", hint:"Право на защиту.",
cases:[
{q:"Обвиняемый пригласил адвоката на допрос.", a:"165", o:["165","46","47","49","56"], breakdown:"Защита обвиняемого; Статья 165 УПК РФ.", trap:"Не спутать с правами потерпевшего."}
]
},
{
n:"170", t:"Допрос", d:"Процесс выяснения обстоятельств дела следователем.", example:"Допрос свидетеля и обвиняемого.", hint:"Цель — выяснение обстоятельств.",
cases:[
{q:"Следователь допросил свидетеля по делу о краже.", a:"170", o:["170","162","163","46","47"], breakdown:"Допрос; Статья 170 УПК РФ.", trap:"Не спутать с очной ставкой."}
]
},
{
n:"176", t:"Очная ставка", d:"Встреча обвиняемого и свидетеля для выяснения противоречий.", example:"Обвиняемый и свидетель встретились для дачи показаний.", hint:"Очная встреча для проверки показаний.",
cases:[
{q:"Проведена очная ставка между свидетелем и обвиняемым.", a:"176", o:["176","170","162","163","46"], breakdown:"Очная ставка; Статья 176 УПК РФ.", trap:"Не спутать с обычным допросом."}
]
},
{
n:"180", t:"Заключение эксперта", d:"Документ с результатами экспертизы.", example:"Эксперт подготовил заключение по делу.", hint:"Документ экспертизы.",
cases:[
{q:"Эксперт подготовил заключение о подлинности подписи.", a:"180", o:["180","128","125","46","47"], breakdown:"Заключение эксперта; Статья 180 УПК РФ.", trap:"Не спутать с устными показаниями."}
]
},
{
n:"182", t:"Предварительное заключение", d:"Вывод следствия о наличии/отсутствии состава преступления.", example:"Следствие сделало вывод о преступлении.", hint:"Вывод о наличии преступления.",
cases:[
{q:"Следствие сделало предварительный вывод о краже.", a:"182", o:["182","56","46","47","49"], breakdown:"Предварительное заключение; Статья 182 УПК РФ.", trap:"Не спутать с обвинением."}
]
},
{
n:"186", t:"Оценка доказательств", d:"Анализ доказательств для решения вопроса по делу.", example:"Следователь оценил вещественные доказательства.", hint:"Оценка доказательств.",
cases:[
{q:"Следователь оценил вещественные доказательства по делу.", a:"186", o:["186","182","56","46","47"], breakdown:"Оценка доказательств; Статья 186 УПК РФ.", trap:"Не спутать с поддельными доказательствами."}
]
}
];

// -------------------- ЛОГИКА --------------------
let currentCode=null,currentArticle=null,quizAttempts=0,quizPool=[];

function selectCode(code){
  currentCode=code;
  document.getElementById('main-screen').classList.add('hidden');
  document.getElementById('tabs').classList.remove('hidden');
  document.getElementById('back-button-container').classList.remove('hidden');
  showTab('theory');
}

function showTab(tab){
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  if(tab==='theory') document.querySelectorAll('.tab-btn')[0].classList.add('active');
  else document.querySelectorAll('.tab-btn')[1].classList.add('active');

  document.getElementById('theory-screen').classList.add('hidden');
  document.getElementById('quiz-screen').classList.add('hidden');

  if(tab==='theory') showTheory();
  else startFullQuiz();
}

function showTheory(){
  let screen=document.getElementById('theory-screen');
  screen.innerHTML="<h2>Выберите статью</h2>";
  db[currentCode].articles.forEach(a=>{
    let btn=document.createElement('button');
    btn.innerText=a.n+" — "+a.t;
    btn.onclick=()=>showArticle(a);
    screen.appendChild(btn);
  });
  screen.classList.remove('hidden');
}

function showArticle(article){
  currentArticle=article;
  let screen=document.getElementById('theory-screen');
  screen.innerHTML=`
    <div class="card">
      <h3>${article.n} — ${article.t}</h3>
      <p>${article.d}</p>
      <p><b>Пример:</b> ${article.example}</p>
    </div>`;
}

function startFullQuiz(){
  quizAttempts=0;
  // создаём пул вопросов по всем статьям выбранного кодекса
  quizPool=[];
  db[currentCode].articles.forEach(a=>{
    a.cases.forEach(c=>quizPool.push({article:a,case:c}));
  });
  quizPool.sort(()=>Math.random()-0.5);
  generateQuiz();
}

function generateQuiz(){
  if(quizPool.length===0){ alert("Все вопросы пройдены!"); showTab('theory'); return; }
  let current=quizPool.pop();
  currentArticle=current.article;
  let randCase=current.case;
  let screen=document.getElementById('quiz-screen'); screen.innerHTML="";
  let card=document.createElement('div'); card.className='card';
  card.innerHTML=`<p><b>Ситуация:</b> ${randCase.q}</p>`;
  let optionsDiv=document.createElement('div'); optionsDiv.className='case-options';
  randCase.o.sort(()=>Math.random()-0.5);
  randCase.o.forEach(opt=>{
    let btn=document.createElement('button');
    btn.innerText=opt;
    btn.onclick=()=>checkAnswer(opt, randCase.a, randCase);
    optionsDiv.appendChild(btn);
  });
  card.appendChild(optionsDiv);
  let breakdownDiv=document.createElement('div'); breakdownDiv.className='breakdown';
  breakdownDiv.innerHTML=`<b>Разбор:</b> ${randCase.breakdown}<br><b>Ловушка:</b> ${randCase.trap}`;
  card.appendChild(breakdownDiv);
  let toggleBtn=document.createElement('button'); toggleBtn.innerText="Показать разбор"; toggleBtn.className="toggle-btn";
  toggleBtn.onclick=()=>{breakdownDiv.style.display=breakdownDiv.style.display==='none'?'block':'none';};
  card.appendChild(toggleBtn);
  screen.appendChild(card); screen.classList.remove('hidden');
}

function checkAnswer(selected, correct, randCase){
  if(selected===correct){
    alert("Правильно!");
    generateQuiz();
  } else {
    quizAttempts++;
    new Audio("https://www.soundjay.com/button/sounds/button-16.mp3").play(); // мягкий щелчок
    alert("Неправильно! Подсказка: "+(currentArticle.hint||"Подсказка не добавлена"));
    if(quizAttempts>=2){ alert("НЕ СДАЛ"); showTab('theory'); }
  }
}

function goMain(){
  document.getElementById('main-screen').classList.remove('hidden');
  document.getElementById('tabs').classList.add('hidden');
  document.getElementById('theory-screen').classList.add('hidden');
  document.getElementById('quiz-screen').classList.add('hidden');
  document.getElementById('back-button-container').classList.add('hidden');
}
</script>
</div>
</body>
</html>
